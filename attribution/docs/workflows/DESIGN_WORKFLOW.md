# Workflow по созданию интерфейса

## Проблемы старого подхода:
❌ Слепое кодирование без визуальной проверки
❌ Невнимательный анализ референсов
❌ Множество итераций и переделок
❌ Потеря времени и токенов

## Новый workflow:

### Этап 1: Получение и анализ референса

**Входные данные:**
- Скриншот дизайна
- URL страницы (опционально)
- Описание требований от пользователя

**Действия:**
1. Получить референс
2. Использовать Design Analyzer для создания спецификации:
   ```bash
   # Через API или напрямую через агента
   ```

**Выход:**
- Детальная JSON спецификация с:
  - Точными цветами (rgb/hex)
  - Размерами всех элементов
  - Отступами и gaps
  - Shadows, transitions, effects
  - Структурой компонентов

### Этап 2: Создание HTML прототипа

**Чек-лист перед началом кодирования:**
- [ ] Извлечены ВСЕ цвета из спецификации
- [ ] Известны размеры всех элементов
- [ ] Описаны все интерактивные состояния (hover, focus, active)
- [ ] Учтены z-index и наложения элементов
- [ ] Определены все animations/transitions
- [ ] Понятна структура layout (flex/grid/absolute)

**Действия:**
1. Создать HTML файл в `prototypes/[component-name].html`
2. Реализовать дизайн на основе спецификации
3. Проверить все интерактивные состояния
4. Убедиться что все элементы на месте

**Выход:**
- Готовый HTML прототип в папке `prototypes/`

### Этап 3: Проверка пользователем

**Действия:**
1. Пользователь открывает HTML файл в браузере
2. Сравнивает с референсом
3. Проверяет интерактивность (hover, focus)
4. Даёт обратную связь

**Возможные исходы:**
- ✅ Одобрено → переход к Этапу 4
- ❌ Есть замечания → возврат к Этапу 2 с правками

### Этап 4: Конвертация в React

**Действия:**
1. Конвертировать HTML → React компонент
2. Использовать Tailwind CSS классы
3. Добавить типизацию TypeScript
4. Добавить state management если нужно
5. Сохранить прототип в `prototypes/` для истории

**Выход:**
- Готовый React компонент в `app/` или `components/`
- Сохраненный HTML прототип

### Этап 5: Финальная проверка

**Действия:**
1. Запустить dev сервер
2. Пользователь проверяет на реальном сайте
3. Финальные правки если нужны

---

## Примеры применения

### Пример 1: Страница логина

**Этап 1:** Получен референс https://id.roimax.ai/
- ❌ Старый подход: Сразу начал кодить React → ошибки с градиентом, логотипом, лейблами
- ✅ Новый подход:
  1. Анализ референса → спецификация:
     - Background: `rgb(109, 140, 248)` (НЕ градиент!)
     - Logo: "UnMo" снаружи + "GrowP" внутри круга
     - Inputs: floating labels с transition
     - Button: `rgb(48, 80, 147)` с darkening
  2. HTML прототип с точными значениями
  3. Проверка → одобрение
  4. Конвертация в React

**Результат:**
- Старый: 10+ итераций, много фрустрации
- Новый: 2-3 итерации, чёткий результат

### Пример 2: Полупрозрачный круг за логотипом

**Этап 1:** Скриншот с эффектом
- ❌ Старый подход: 4+ итерации (280px→140px, текст внутри→снаружи, etc)
- ✅ Новый подход:
  1. Детальный анализ скриншота:
     - Круг 140px (такой же как белый)
     - `rgba(255, 255, 255, 0.15)`
     - Position: absolute, behind "UnMo"
     - z-index: 0 (под текстом), белый круг z-index: 2
  2. HTML прототип с правильным z-index
  3. Одна проверка → готово

---

## Инструменты

### Design Analyzer Agent
```typescript
import { DesignAnalyzer } from '@/lib/agents/design-analyzer/agent';

const analyzer = new DesignAnalyzer(process.env.ANTHROPIC_API_KEY);
const spec = await analyzer.analyzeDesign(imageBase64, 'Login page design');
```

### HTML Prototype Generator
```bash
# В будущем можно автоматизировать
node scripts/generate-prototype.js --spec design-spec.json --output prototypes/login.html
```

---

## Метрики успеха

**Старый подход:**
- Среднее количество итераций: 8-10
- Время на компонент: 2-3 часа
- Уровень фрустрации: высокий

**Новый подход (цель):**
- Среднее количество итераций: 2-3
- Время на компонент: 30-60 минут
- Уровень фрустрации: низкий
- Качество с первого раза: 85%+

---

## Общие правила

1. **НИКОГДА не пропускать HTML прототип** для визуальных компонентов
2. **ВСЕГДА извлекать точные значения** из референса (не "синий", а "rgb(109, 140, 248)")
3. **ПРОВЕРЯТЬ все интерактивные состояния** (hover, focus, active, disabled)
4. **ОПИСЫВАТЬ z-index и наложения** если элементы перекрываются
5. **СОХРАНЯТЬ прототипы** в `prototypes/` для истории и документации
6. **ИСПОЛЬЗОВАТЬ Design Analyzer** для сложных дизайнов

---

## Шаблоны

### Чек-лист для нового компонента

```markdown
## [Название компонента]

### Референс
- [ ] Скриншот получен
- [ ] URL получен (если есть)
- [ ] Требования понятны

### Анализ
- [ ] Извлечены все цвета (с точными значениями)
- [ ] Измерены все размеры
- [ ] Описаны все отступы
- [ ] Определены shadows/effects
- [ ] Понятна структура layout
- [ ] Описаны hover/focus/active состояния

### Прототип
- [ ] HTML файл создан в prototypes/
- [ ] Все стили реализованы
- [ ] Интерактивность работает
- [ ] Проверено в браузере
- [ ] Сравнено с референсом

### Проверка пользователем
- [ ] Пользователь открыл прототип
- [ ] Сравнил с референсом
- [ ] Дал обратную связь
- [ ] Одобрил для React конвертации

### React компонент
- [ ] Конвертирован в React
- [ ] Использует Tailwind CSS
- [ ] Типизирован TypeScript
- [ ] State management добавлен
- [ ] Проверен на dev сервере
- [ ] Финально одобрен
```

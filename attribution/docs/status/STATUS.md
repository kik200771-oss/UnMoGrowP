# –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ Attribution

**–î–∞—Ç–∞:** 2025-10-20
**–ü—Ä–æ–µ–∫—Ç:** Attribution Platform

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- Git v2.51.1
- Node.js v22.20.0
- Python v3.14.0
- Bun v1.3.0
- Go v1.25.3
- Docker v28.5.1

### 2. –ó–∞–ø—É—â–µ–Ω—ã –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã

–í—Å–µ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç:

| –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å | –ü–æ—Ä—Ç—ã | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|--------|-------|------------|
| ClickHouse | ‚úÖ healthy | 8123, 9000 | OLAP –±–∞–∑–∞ –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ |
| PostgreSQL | ‚úÖ healthy | 5432 | OLTP –±–∞–∑–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| Redis | ‚úÖ healthy | 6379 | –ö—ç—à –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ—Å—Å–∏–π |
| Kafka | ‚úÖ healthy | 9092, 9093 | –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π |
| Zookeeper | ‚úÖ healthy | 2181 | –ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥–ª—è Kafka |
| Kafka UI | ‚úÖ running | 8080 | Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Kafka |

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

```bash
# ClickHouse
curl http://localhost:8123/?query=SELECT%201
# –û—Ç–≤–µ—Ç: 1 ‚úÖ

# PostgreSQL
docker-compose exec postgres psql -U unmogrowp -c "SELECT 1"
# –û—Ç–≤–µ—Ç: 1 ‚úÖ

# Redis
docker-compose exec redis redis-cli -a dev_password_123 ping
# –û—Ç–≤–µ—Ç: PONG ‚úÖ

# Kafka UI
http://localhost:8080 ‚úÖ
```

### 4. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
C:\–ö–û–î–ò–ù–ì\attribution\
‚îú‚îÄ‚îÄ app/                          # Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
‚îú‚îÄ‚îÄ clickhouse-config/            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è ClickHouse
‚îÇ   ‚îî‚îÄ‚îÄ users.xml
‚îú‚îÄ‚îÄ docker-compose.yml            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
‚îú‚îÄ‚îÄ package.json                  # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
‚îú‚îÄ‚îÄ SETUP.md                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
‚îú‚îÄ‚îÄ DEV-ENVIRONMENT.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ DOCUMENTATION-MAINTENANCE.md  # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ INSTALL-REMAINING.md          # –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ Go/Docker
```

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –§–∞–∑–∞ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö

1. **PostgreSQL - —Å–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –ë–î**
   ```bash
   # –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   # - Users (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
   # - Apps (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   # - Campaigns (–∫–∞–º–ø–∞–Ω–∏–∏)
   # - Attribution rules (–ø—Ä–∞–≤–∏–ª–∞ –∞—Ç—Ä–∏–±—É—Ü–∏–∏)
   ```

2. **ClickHouse - —Å–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—É –ë–î**
   ```bash
   # –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
   # - Events (—Å–æ–±—ã—Ç–∏—è)
   # - Conversions (–∫–æ–Ω–≤–µ—Ä—Å–∏–∏)
   # - Attribution (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞—Ç—Ä–∏–±—É—Ü–∏–∏)
   ```

3. **Kafka - —Å–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫–∏**
   ```bash
   # –°–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫–∏ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
   # - raw-events
   # - processed-events
   # - attribution-results
   ```

### –§–∞–∑–∞ 2: Backend (Go)

1. **–°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É Go –ø—Ä–æ–µ–∫—Ç–∞**
   ```
   backend/
   ‚îú‚îÄ‚îÄ cmd/api/           # HTTP API —Å–µ—Ä–≤–µ—Ä
   ‚îú‚îÄ‚îÄ cmd/worker/        # Kafka worker
   ‚îú‚îÄ‚îÄ internal/
   ‚îÇ   ‚îú‚îÄ‚îÄ config/        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   ‚îÇ   ‚îú‚îÄ‚îÄ database/      # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
   ‚îÇ   ‚îú‚îÄ‚îÄ models/        # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
   ‚îÇ   ‚îú‚îÄ‚îÄ handlers/      # HTTP —Ö–µ–Ω–¥–ª–µ—Ä—ã
   ‚îÇ   ‚îî‚îÄ‚îÄ services/      # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
   ‚îî‚îÄ‚îÄ go.mod
   ```

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   - HTTP API –¥–ª—è –ø—Ä–∏–µ–º–∞ —Å–æ–±—ã—Ç–∏–π
   - Kafka producer/consumer
   - –°–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç—ã —Å ClickHouse
   - –°–µ—Ä–≤–∏—Å—ã —Ä–∞–±–æ—Ç—ã —Å PostgreSQL
   - Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–°–æ–∑–¥–∞—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
   - `POST /api/events` - –ø—Ä–∏–µ–º —Å–æ–±—ã—Ç–∏–π
   - `GET /api/attribution/:campaign` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∞—Ç—Ä–∏–±—É—Ü–∏–∏
   - `GET /api/health` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–µ—Ä–≤–∏—Å–æ–≤

### –§–∞–∑–∞ 3: Frontend (Next.js)

1. **–°–æ–∑–¥–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã**
   - Dashboard (–≥–ª–∞–≤–Ω–∞—è —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏)
   - Campaigns (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–º–ø–∞–Ω–∏—è–º–∏)
   - Events (—Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π)
   - Analytics (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏)

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Backend API**
   - Fetch –¥–∞–Ω–Ω—ã—Ö –∏–∑ Go API
   - Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
   - –ì—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

3. **UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
   - –¢–∞–±–ª–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏
   - –ì—Ä–∞—Ñ–∏–∫–∏ (Chart.js –∏–ª–∏ Recharts)
   - –§–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–º–ø–∞–Ω–∏–π
   - –î–∞—à–±–æ—Ä–¥ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏

### –§–∞–∑–∞ 4: Attribution Engine

1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ –∞—Ç—Ä–∏–±—É—Ü–∏–∏**
   - Last Click (–ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–ª–∏–∫)
   - First Click (–ø–µ—Ä–≤—ã–π –∫–ª–∏–∫)
   - Linear (–ª–∏–Ω–µ–π–Ω–∞—è)
   - Time Decay (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ)
   - Position Based (–Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–∑–∏—Ü–∏–∏)

2. **Kafka Worker –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏**
   - –ß–∏—Ç–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –∏–∑ Kafka
   - –ü—Ä–∏–º–µ–Ω—è—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –∞—Ç—Ä–∏–±—É—Ü–∏–∏
   - –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ ClickHouse

3. **Real-time –æ–±—Ä–∞–±–æ—Ç–∫–∞**
   - –ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
   - –ê–≥—Ä–µ–≥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞—à–±–æ—Ä–¥–æ–≤

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### Docker
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up -d

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose down

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å
docker-compose restart <service>
```

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å Next.js dev —Å–µ—Ä–≤–µ—Ä
npm run dev

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Go backend (–∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–¥–∏–º)
cd backend && go run cmd/api/main.go

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Kafka worker (–∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–¥–∏–º)
cd backend && go run cmd/worker/main.go
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [SETUP.md](SETUP.md) - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- [DEV-ENVIRONMENT.md](DEV-ENVIRONMENT.md) - –û–ø–∏—Å–∞–Ω–∏–µ dev –æ–∫—Ä—É–∂–µ–Ω–∏—è
- [DOCUMENTATION-MAINTENANCE.md](DOCUMENTATION-MAINTENANCE.md) - –ö–∞–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã. –õ–æ–∫–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω.

### ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –¥–æ–º–µ–Ω—ã:
- http://unmogrowp.local:3000 - Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- http://api.unmogrowp.local:8000 - Go backend (—Å–æ–∑–¥–∞—Ç—å –ø–æ–∑–∂–µ)
- http://kafka.unmogrowp.local:8080 - Kafka UI

### –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏:
1. –°–æ–∑–¥–∞—Ç—å —Å—Ö–µ–º—ã –ë–î
2. –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å Go backend
3. –°–æ–∑–¥–∞—Ç—å Next.js UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å attribution engine

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è —Ä–∞–±–æ—Ç—ã –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:
1. –ó–∞–ø—É—Å—Ç–∏—Ç—å Docker Desktop
2. –í—ã–ø–æ–ª–Ω–∏—Ç—å `docker-compose up -d`
3. –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (30-60 —Å–µ–∫)
